<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Login — eApproval</title>

    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
      :root{
        --bg-top: #0f172a;      /* deep navy */
        --bg-bottom:#0b1220;    /* darker navy */
        --accent-1: #6ee7b7;    /* mint */
        --accent-2: #60a5fa;    /* sky */
        --card-bg: rgba(255,255,255,0.02);
        --card-border: rgba(255,255,255,0.06);
        --text-main: #e6eef9;
        --muted: rgba(230,238,249,0.7);
      }

      html,body{
        height:100%;
        margin:0;
        font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
        background: linear-gradient(180deg, var(--bg-top) 0%, var(--bg-bottom) 100%);
        color:var(--text-main);
      }

      .wrap {
        min-height:100%;
        display:flex;
        align-items:center;
        justify-content:center;
        padding:32px 16px;
      }

      .login-card{
        width:100%;
        max-width:420px;
        padding:28px;
        border-radius:14px;
        background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
        border:1px solid var(--card-border);
        box-shadow: 0 10px 30px rgba(2,6,23,0.6);
        backdrop-filter: blur(6px);
      }

      .brand{
        display:flex;
        gap:12px;
        align-items:center;
        margin-bottom:6px;
      }
      .brand h1{
        margin:0;
        font-size:20px;
        font-weight:700;
        color:var(--text-main);
        letter-spacing:0.2px;
      }
      .lead-muted{
        color:var(--muted);
        margin-bottom:16px;
      }

      label { color: #dbeafe; font-weight:600; }
      .form-control {
        background: rgba(255,255,255,0.02);
        border:1px solid rgba(255,255,255,0.06);
        color:var(--text-main);
        border-radius:8px;
        padding:12px 14px;
      }
      .form-control:focus{
        outline:none;
        box-shadow: 0 0 0 4px rgba(96,165,250,0.08);
        border-color: rgba(96,165,250,0.9);
      }

      .btn-login{
        border-radius:10px;
        padding:10px 14px;
        font-weight:700;
        background: linear-gradient(90deg,var(--accent-1),var(--accent-2));
        border: none;
        color: #06202b;
        box-shadow: 0 6px 18px rgba(96,165,250,0.12);
      }

      .small-muted { color:var(--muted); font-size:0.9rem; }

      .flash-alert {
        border-radius:8px;
        margin-bottom:14px;
      }

      @media (max-width:420px){
        .login-card{ padding:18px; border-radius:10px; }
      }
    </style>
  </head>
  <body>
    <div class="wrap">
      <div class="login-card">

        <div class="brand">
          <!-- optional logo (put a logo at static/logo.png) -->
          <img src="{{ url_for('static', filename='logo.png') }}" alt="logo" style="width:44px;height:44px;object-fit:contain" onerror="this.style.display='none'">
          <h1>eApproval</h1>
        </div>

        <p class="lead-muted">Sign in to access the eApproval dashboard</p>

        <!-- Flash messages -->
        {% with messages = get_flashed_messages(with_categories=true) %}
          {% if messages %}
            {% for category, msg in messages %}
              <div class="flash-alert alert alert-{{ 'danger' if category == 'error' else category }} alert-dismissible fade show" role="alert">
                {{ msg }}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
              </div>
            {% endfor %}
          {% endif %}
        {% endwith %}

        <form method="post" action="{{ url_for('login') }}" novalidate>
          {% if form is defined %}
            {{ form.hidden_tag() }}
          {% endif %}

          <div class="mb-3">
            <label for="username">Username</label>
            <input id="username" name="username" type="text" class="form-control" placeholder="Enter your username" required autofocus>
          </div>

          <div class="mb-3">
            <label for="password">Password</label>
            <div class="input-group">
              <input id="password" name="password" type="password" class="form-control" placeholder="Enter your password" required>
              <button class="btn btn-outline-light" type="button" id="togglePassword" aria-label="Show password" style="border-radius:8px;">
                Show
              </button>
            </div>
          </div>

          <div class="d-grid mt-2">
            <button type="submit" class="btn btn-login">Login</button>
          </div>
        </form>

        <div class="text-center mt-3 small-muted">© {{ current_year if current_year is defined else '' }} eApproval</div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      document.getElementById('togglePassword')?.addEventListener('click', function(){
        const pw = document.getElementById('password');
        if(!pw) return;
        if(pw.type === 'password'){ pw.type = 'text'; this.textContent = 'Hide'; }
        else { pw.type = 'password'; this.textContent = 'Show'; }
      });
      // submit on enter
      Array.from(document.querySelectorAll('input')).forEach(el=>{
        el.addEventListener('keypress', e=>{ if(e.key==='Enter' && el.form) el.form.requestSubmit(); });
      });
    </script>
  </body>
</html>
